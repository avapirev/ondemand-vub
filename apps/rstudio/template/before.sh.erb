<%= ERB.new(File.read('../common_files/ood_session.sh.erb'), eoutvar: 'child').result(binding) %>
<%= ERB.new(File.read('../common_files/work_directory.sh.erb'), eoutvar: 'child').result(binding) %>
<%= ERB.new(File.read('../common_files/job_environment.sh.erb'), eoutvar: 'child').result(binding) %>

export OOD_APP_NAME="RStudio"

# RStudio needs a longer timeout (default: 180s)
export MAXWAIT=300
echo "increased server wait time: ${MAXWAIT}s"

# rstudio 1.4+ needs a csrf token
csrf_token=<%= SecureRandom.uuid %>

export RSTUDIO_PASSWORD="$password"
